{
  "version": 1,
  "actions": [
    {
      "name": "conversation_stream",
      "description": "Stream chat conversation messages published on /conversation.",
      "kind": "stream-topic",
      "defaults": {
        "topic": "/conversation",
        "message_type": "psyched_msgs/msg/Message",
        "role": "subscribe",
        "queue_length": 40
      },
      "parameters": {
        "type": "object",
        "properties": {
          "queue_length": {
            "type": "integer",
            "minimum": 1,
            "maximum": 400,
            "description": "Optional override for the subscription queue length."
          }
        },
        "additionalProperties": false
      }
    },
    {
      "name": "post_message",
      "description": "Publish a structured conversation message to /conversation.",
      "kind": "publish-topic",
      "defaults": {
        "topic": "/conversation",
        "message_type": "psyched_msgs/msg/Message",
        "payload": {
          "role": "user",
          "content": "",
          "speaker": "cockpit",
          "confidence": 1.0,
          "segments": [],
          "words": []
        },
        "payload_map": {
          "role": "role",
          "content": "content",
          "speaker": "speaker",
          "confidence": "confidence"
        }
      },
      "parameters": {
        "type": "object",
        "properties": {
          "role": {
            "type": "string",
            "description": "Sender role label (user, assistant, system, cockpit, etc.)."
          },
          "speaker": {
            "type": "string",
            "description": "Human-readable speaker identifier."
          },
          "confidence": {
            "type": "number",
            "minimum": 0.0,
            "maximum": 1.0,
            "description": "Optional confidence score for the utterance."
          },
          "content": {
            "type": "string",
            "minLength": 1,
            "description": "Chat message body to enqueue."
          }
        },
        "required": [
          "content"
        ],
        "additionalProperties": false
      },
      "returns": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          },
          "topic": {
            "type": "string"
          },
          "message_type": {
            "type": "string"
          }
        },
        "required": [
          "status",
          "topic"
        ],
        "additionalProperties": true
      }
    },
    {
      "name": "voice_stream",
      "description": "Subscribe to the /voice text stream used by the speech synthesiser.",
      "kind": "stream-topic",
      "defaults": {
        "topic": "/voice",
        "message_type": "std_msgs/msg/String",
        "role": "subscribe",
        "queue_length": 20
      },
      "parameters": {
        "type": "object",
        "properties": {
          "queue_length": {
            "type": "integer",
            "minimum": 1,
            "maximum": 200,
            "description": "Optional override for the subscription queue length."
          }
        },
        "additionalProperties": false
      }
    },
    {
      "name": "send_voice",
      "description": "Publish a text payload to /voice for downstream speech synthesis modules.",
      "kind": "publish-topic",
      "defaults": {
        "topic": "/voice",
        "message_type": "std_msgs/msg/String",
        "payload_map": {
          "text": "data"
        }
      },
      "parameters": {
        "type": "object",
        "properties": {
          "text": {
            "type": "string",
            "minLength": 1,
            "maxLength": 400,
            "description": "Speech text to queue."
          }
        },
        "required": [
          "text"
        ],
        "additionalProperties": false
      },
      "returns": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string"
          },
          "topic": {
            "type": "string"
          },
          "message_type": {
            "type": "string"
          }
        },
        "required": [
          "status",
          "topic"
        ],
        "additionalProperties": true
      }
    }
  ]
}
